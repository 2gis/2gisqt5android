<!DOCTYPE html>
<html>
<head>
<title>test ws connection</title>
<script type="text/javascript">

var href = window.location.href;
var hostBegin = href.indexOf('/') + 2;
var hostEnd = href.lastIndexOf(':');
var host = href.slice(hostBegin, hostEnd);
var portBegin = hostEnd + 1;
var portEnd = href.lastIndexOf('/');
var port = href.slice(portBegin, portEnd);
var scheme = href.indexOf('https') >= 0 ? 'wss' : 'ws';
var url = scheme + '://' + host + ':' + port + '/echo-with-no-extension';

// Do connection test.
var ws = new WebSocket(url);

ws.onopen = function()
{
  // Set document title to 'PASS'. The test observer catches this title changes
  // to know the result.
  document.title = 'PASS';
}

ws.onclose = function()
{
  // Set document title to 'FAIL'.
  document.title = 'FAIL';
}

</script>
</head>
</html>
